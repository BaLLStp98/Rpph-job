# 🔄 Register Flow Diagram

## 📊 Flow Chart แบบ Text

```
┌─────────────────────────────────────────────────────────────────┐
│                        🚀 REGISTER FLOW                        │
└─────────────────────────────────────────────────────────────────┘

┌─────────────────┐    ┌─────────────────┐    ┌─────────────────┐
│   👤 ผู้ใช้      │    │  🔐 NextAuth    │    │ 📱 ฟอร์ม Register │
│                 │    │                 │    │                 │
│ เข้าถึง          │───▶│ ตรวจสอบ Session │───▶│ แสดงฟอร์ม       │
│ /register       │    │                 │    │ 3 ขั้นตอน       │
│ หรือ            │    │                 │    │                 │
│ /register?      │    │                 │    │                 │
│ department=xxx  │    │                 │    │                 │
└─────────────────┘    └─────────────────┘    └─────────────────┘
                                │
                                ▼
                       ┌─────────────────┐
                       │ ❌ ไม่ได้ Login  │
                       │                 │
                       │ Redirect ไป     │
                       │ /auth/signin    │
                       └─────────────────┘

┌─────────────────────────────────────────────────────────────────┐
│                    📝 ขั้นตอนการกรอกข้อมูล                        │
└─────────────────────────────────────────────────────────────────┘

┌─────────────────┐    ┌─────────────────┐    ┌─────────────────┐
│ 📋 ขั้นตอนที่ 1   │    │ 🎓 ขั้นตอนที่ 2   │    │ 💼 ขั้นตอนที่ 3   │
│                 │    │                 │    │                 │
│ ข้อมูลส่วนตัว     │───▶│ ข้อมูลการศึกษา    │───▶│ ข้อมูลประสบการณ์  │
│                 │    │                 │    │                 │
│ • ชื่อ-นามสกุล   │    │ • ระดับการศึกษา   │    │ • ประวัติทำงาน    │
│ • อีเมล-เบอร์โทร  │    │ • สถาบัน-สาขา    │    │ • รับราชการก่อน   │
│ • ที่อยู่        │    │ • ปี-GPA        │    │ • ทักษะ-ความสามารถ │
│ • ผู้ติดต่อฉุกเฉิน │    │                 │    │                 │
└─────────────────┘    └─────────────────┘    └─────────────────┘

┌─────────────────────────────────────────────────────────────────┐
│                      💾 การบันทึกข้อมูล                          │
└─────────────────────────────────────────────────────────────────┘

┌─────────────────┐    ┌─────────────────┐    ┌─────────────────┐
│ 📤 ส่งข้อมูล     │    │ 🔍 ตรวจสอบข้อมูล  │    │ 💾 บันทึกฐานข้อมูล │
│                 │    │                 │    │                 │
│ POST /api/      │───▶│ Validation      │───▶│ Prisma Create   │
│ resume-deposit  │    │                 │    │                 │
│                 │    │                 │    │                 │
└─────────────────┘    └─────────────────┘    └─────────────────┘
                                │
                                ▼
                       ┌─────────────────┐
                       │ ❌ Validation   │
                       │    Error        │
                       │                 │
                       │ แสดง Error      │
                       │ Message         │
                       └─────────────────┘

┌─────────────────────────────────────────────────────────────────┐
│                        🗄️ ฐานข้อมูล                              │
└─────────────────────────────────────────────────────────────────┘

┌─────────────────┐    ┌─────────────────┐    ┌─────────────────┐
│ 📋 ResumeDeposit │    │ 🎓 Education    │    │ 💼 WorkExperience│
│                 │    │                 │    │                 │
│ • ข้อมูลหลัก      │◀───│ • ข้อมูลการศึกษา  │◀───│ • ประวัติทำงาน   │
│ • ข้อมูลการสมัคร  │    │ • เชื่อมโยง      │    │ • เชื่อมโยง      │
│ • สถานะ         │    │ • หลายเรคคอร์ด   │    │ • หลายเรคคอร์ด   │
└─────────────────┘    └─────────────────┘    └─────────────────┘
         │
         ▼
┌─────────────────┐    ┌─────────────────┐
│ 🏛️ PreviousGov  │    │ 📄 Documents    │
│                 │    │                 │
│ • รับราชการก่อน  │    │ • เอกสารแนบ     │
│ • เชื่อมโยง      │    │ • เชื่อมโยง      │
│ • หลายเรคคอร์ด   │    │ • หลายเรคคอร์ด   │
└─────────────────┘    └─────────────────┘

┌─────────────────────────────────────────────────────────────────┐
│                        📱 ผลลัพธ์                               │
└─────────────────────────────────────────────────────────────────┘

┌─────────────────┐    ┌─────────────────┐
│ ✅ สำเร็จ        │    │ ❌ ผิดพลาด       │
│                 │    │                 │
│ "บันทึกข้อมูล     │    │ "เกิดข้อผิดพลาด  │
│ เรียบร้อยแล้ว"    │    │ ในการบันทึกข้อมูล"│
│                 │    │                 │
│ Redirect ไป      │    │ แสดง Error      │
│ Dashboard        │    │ Message        │
└─────────────────┘    └─────────────────┘

┌─────────────────────────────────────────────────────────────────┐
│                    🔄 Flow พิเศษ: Department                    │
└─────────────────────────────────────────────────────────────────┘

┌─────────────────┐    ┌─────────────────┐    ┌─────────────────┐
│ 🌐 URL Parameter │    │ 🔍 ตรวจสอบ      │    │ 📋 โหลดข้อมูลเดิม  │
│                 │    │                 │    │                 │
│ ?department=    │───▶│ Department      │───▶│ GET /api/       │
│ ฝ่ายเทคโนโลยี    │    │ Parameter       │    │ resume-deposit  │
│                 │    │                 │    │                 │
└─────────────────┘    └─────────────────┘    └─────────────────┘
                                │
                                ▼
                       ┌─────────────────┐
                       │ 📝 แสดงฟอร์ม     │
                       │                 │
                       │ • ข้อมูลเดิม      │
                       │   (ถ้ามี)        │
                       │ • ข้อมูลใหม่      │
                       │   (ถ้าไม่มี)      │
                       └─────────────────┘

┌─────────────────────────────────────────────────────────────────┐
│                        🔒 ความปลอดภัย                           │
└─────────────────────────────────────────────────────────────────┘

┌─────────────────┐    ┌─────────────────┐    ┌─────────────────┐
│ 🔐 Authentication│    │ 🛡️ Authorization │    │ 🔍 Data Validation│
│                 │    │                 │    │                 │
│ • NextAuth      │    │ • User สามารถ   │    │ • ตรวจสอบข้อมูล   │
│ • Line OAuth    │    │   ดู/แก้ไข      │    │ • ป้องกัน SQL    │
│ • Session       │    │   ข้อมูลของ      │    │   Injection     │
│                 │    │   ตัวเองเท่านั้น  │    │ • File Upload   │
│                 │    │ • Admin ดูได้    │    │   Security      │
│                 │    │   ทั้งหมด       │    │                 │
└─────────────────┘    └─────────────────┘    └─────────────────┘

┌─────────────────────────────────────────────────────────────────┐
│                        📱 UI/UX Features                       │
└─────────────────────────────────────────────────────────────────┘

┌─────────────────┐    ┌─────────────────┐    ┌─────────────────┐
│ 📱 Responsive    │    │ 🎯 Progress      │    │ ⚡ Auto-save     │
│                 │    │                 │    │                 │
│ • Mobile        │    │ • แสดงความคืบหน้า │    │ • บันทึกอัตโนมัติ  │
│ • Desktop       │    │ • 3 ขั้นตอน      │    │ • Real-time     │
│ • Slide-in      │    │ • ย้อนกลับ/ถัดไป │    │   Validation    │
│   Panels        │    │                 │    │                 │
└─────────────────┘    └─────────────────┘    └─────────────────┘
```

## 🎯 สรุป Flow

**Register Flow ทำงานผ่าน 6 ขั้นตอนหลัก:**

1. **🔐 Authentication** - ตรวจสอบการเข้าสู่ระบบ
2. **📋 Form Display** - แสดงฟอร์ม 3 ขั้นตอน
3. **📝 Data Input** - ผู้ใช้กรอกข้อมูล
4. **🔍 Validation** - ตรวจสอบข้อมูล
5. **💾 Database Save** - บันทึกข้อมูลในฐานข้อมูล
6. **📱 Result Display** - แสดงผลลัพธ์

**ข้อมูลจะถูกบันทึกใน ResumeDeposit และตารางย่อยที่เกี่ยวข้อง โดยรองรับทั้งการสร้างใหม่และการแก้ไขข้อมูลเดิม**
