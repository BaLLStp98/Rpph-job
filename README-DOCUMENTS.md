# ระบบเอกสารหลักฐานการสมัครงาน

## ภาพรวม

ระบบเอกสารหลักฐานเป็นส่วนที่ช่วยให้ผู้สมัครงานสามารถอัปโหลดเอกสารสำคัญที่จำเป็นสำหรับการสมัครงานได้ โดยรองรับไฟล์ PDF และมีการตรวจสอบความถูกต้องของเอกสาร

## เอกสารที่จำเป็น

### เอกสารพื้นฐาน (ทุกคน)
1. **สำเนาบัตรประชาชน** - สำเนาบัตรประชาชนที่ชัดเจน
2. **สำเนาทะเบียนบ้าน** - สำเนาทะเบียนบ้านฉบับเต็ม
3. **สำเนาหลักฐานการศึกษา** - ใบสุทธิหรือประกาศนียบัตรการศึกษา
4. **ใบรับรองแพทย์** - ใบรับรองแพทย์ไม่เกิน 1 เดือน

### เอกสารเฉพาะเพศชาย
5. **สำเนาหลักฐานทางทหาร** - ใบสำคัญทางทหาร (เฉพาะเพศชาย)

### เอกสารเพิ่มเติม (ถ้ามี)
6. **ใบอนุญาตขับรถ** - ใบอนุญาตขับรถ (ถ้ามี)
7. **สำเนาหลักฐานการเปลี่ยนชื่อ** - เอกสารการเปลี่ยนชื่อ (ถ้ามี)

## ฟีเจอร์หลัก

### 1. การอัปโหลดเอกสาร
- รองรับไฟล์ PDF เท่านั้น
- ขนาดไฟล์ไม่เกิน 10MB
- ระบบตรวจสอบประเภทเอกสาร
- แสดงความคืบหน้าการอัปโหลด

### 2. การจัดการเอกสาร
- ดูรายการเอกสารที่อัปโหลดแล้ว
- ลบเอกสารที่ไม่ต้องการ
- ดูเอกสารในรูปแบบ PDF
- ตรวจสอบสถานะเอกสาร

### 3. การตรวจสอบความครบถ้วน
- แสดงเอกสารที่จำเป็นตามเพศ
- ตรวจสอบเอกสารที่ยังขาด
- แสดงสถานะความครบถ้วน

### 4. สถานะเอกสาร
- **รอตรวจสอบ** - เอกสารที่อัปโหลดใหม่
- **อนุมัติ** - เอกสารที่ผ่านการตรวจสอบ
- **ไม่อนุมัติ** - เอกสารที่ไม่ผ่านการตรวจสอบ

## การใช้งาน

### ในหน้า Application Form
1. กรอกข้อมูลใบสมัครงานให้ครบถ้วน
2. กดปุ่ม "ส่งใบสมัครงาน"
3. ระบบจะแสดงส่วนเอกสารหลักฐาน
4. อัปโหลดเอกสารตามประเภทที่กำหนด

### ในหน้า Profile
1. ค้นหาข้อมูลใบสมัครงาน
2. เลือก "แก้ไขข้อมูล" (ถ้าต้องการ)
3. อัปโหลดหรือจัดการเอกสารในส่วนเอกสารหลักฐาน

## API Endpoints

### POST /api/documents/upload
อัปโหลดเอกสารใหม่

**Request:**
- `personalInfoId` - ID ของข้อมูลส่วนตัว
- `documentType` - ประเภทเอกสาร
- `file` - ไฟล์ PDF

**Response:**
```json
{
  "success": true,
  "message": "อัปโหลดเอกสารเรียบร้อยแล้ว",
  "data": {
    "fileName": "1_idCard_1234567890.pdf",
    "filePath": "/uploads/documents/1_idCard_1234567890.pdf",
    "fileSize": 1024000
  }
}
```

### GET /api/documents
ดึงรายการเอกสาร

**Parameters:**
- `personalInfoId` - ID ของข้อมูลส่วนตัว

**Response:**
```json
{
  "success": true,
  "data": [
    {
      "id": 1,
      "documentType": "idCard",
      "fileName": "1_idCard_1234567890.pdf",
      "filePath": "/uploads/documents/1_idCard_1234567890.pdf",
      "fileSize": 1024000,
      "uploadDate": "2024-01-01T00:00:00.000Z",
      "status": "pending",
      "notes": null
    }
  ]
}
```

### DELETE /api/documents/delete
ลบเอกสาร

**Parameters:**
- `documentId` - ID ของเอกสาร

**Response:**
```json
{
  "success": true,
  "message": "ลบเอกสารเรียบร้อยแล้ว"
}
```

## โครงสร้างฐานข้อมูล

### ตาราง application_documents
```sql
CREATE TABLE application_documents (
    id INT AUTO_INCREMENT PRIMARY KEY,
    personal_info_id INT NOT NULL,
    document_type VARCHAR(50) NOT NULL,
    file_name VARCHAR(255) NOT NULL,
    file_path VARCHAR(500) NOT NULL,
    file_size INT,
    upload_date TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    status ENUM('pending', 'approved', 'rejected') DEFAULT 'pending',
    notes TEXT,
    FOREIGN KEY (personal_info_id) REFERENCES application_personal_info(id) ON DELETE CASCADE
);
```

## การจัดเก็บไฟล์

ไฟล์เอกสารจะถูกเก็บใน:
```
public/uploads/documents/
```

รูปแบบชื่อไฟล์:
```
{personalInfoId}_{documentType}_{timestamp}.pdf
```

ตัวอย่าง:
```
1_idCard_1704067200000.pdf
```

## การรักษาความปลอดภัย

### 1. การตรวจสอบไฟล์
- ตรวจสอบประเภทไฟล์ (PDF เท่านั้น)
- ตรวจสอบขนาดไฟล์ (ไม่เกิน 10MB)
- ตรวจสอบนามสกุลไฟล์

### 2. การจัดการไฟล์
- ใช้ชื่อไฟล์ที่ไม่ซ้ำกัน
- เก็บไฟล์ในโฟลเดอร์ที่ปลอดภัย
- ลบไฟล์เมื่อลบข้อมูลจากฐานข้อมูล

### 3. การเข้าถึง
- ตรวจสอบสิทธิ์การเข้าถึง
- ใช้ prepared statements
- ตรวจสอบข้อมูลก่อนบันทึก

## การจัดการข้อผิดพลาด

### ข้อผิดพลาดทั่วไป
- ไฟล์ไม่ใช่ PDF
- ขนาดไฟล์เกิน 10MB
- ไม่พบข้อมูล personalInfoId
- เกิดข้อผิดพลาดในการอัปโหลด

### การแจ้งเตือน
- แสดงข้อความแจ้งเตือนที่ชัดเจน
- แสดงความคืบหน้าการอัปโหลด
- แจ้งเตือนเมื่ออัปโหลดสำเร็จ

## การพัฒนาต่อ

### ฟีเจอร์ที่สามารถเพิ่มเติมได้:

1. **การตรวจสอบเอกสารอัตโนมัติ**
   - ใช้ AI ตรวจสอบความถูกต้องของเอกสาร
   - ตรวจสอบความชัดเจนของเอกสาร

2. **การแจ้งเตือน**
   - แจ้งเตือนเมื่อเอกสารถูกตรวจสอบ
   - แจ้งเตือนเมื่อเอกสารไม่ผ่านการตรวจสอบ

3. **การพิมพ์เอกสาร**
   - พิมพ์รายการเอกสาร
   - ส่งออกเป็น PDF

4. **การจัดการเวอร์ชัน**
   - เก็บประวัติการอัปโหลดเอกสาร
   - เปรียบเทียบเอกสารเก่า-ใหม่

5. **การแชร์เอกสาร**
   - แชร์เอกสารกับเจ้าหน้าที่
   - ส่งลิงก์เอกสารผ่านอีเมล

## การบำรุงรักษา

### การลบไฟล์เก่า
- ลบไฟล์ที่ไม่ได้ใช้งานนาน
- ลบไฟล์ที่ซ้ำซ้อน

### การสำรองข้อมูล
- สำรองไฟล์เอกสารเป็นประจำ
- สำรองฐานข้อมูลเอกสาร

### การตรวจสอบ
- ตรวจสอบพื้นที่จัดเก็บไฟล์
- ตรวจสอบความถูกต้องของข้อมูล 